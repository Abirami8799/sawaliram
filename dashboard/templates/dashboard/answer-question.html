{% extends "public_website/base.html" %}

{% load static %}

{% block head_includes %}
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
{% endblock %}

{% block title %} Answer Question | Sawaliram {% endblock %}

{# TODO: add breadcrumb, after implemented in base.html #}

{% block extra_header %}
<div class="navbar-extra row justify-content-end">
	<div>
		<button class="btn btn-secondary-hollow">&lt; Prev</button>
		<button class="btn btn-secondary-hollow">Next &gt;</button>
	</div>
</div>
{% endblock %}

{% block content %}
<div class="buffer" style="margin-top: 1rem;"></div>
	<div class="answer-question highlighted-meta-area">
	    <h1 class="question-text-heading">{{ question.question_text }}</h1>
	    {% if question.student_class %}
	        <span class="highlighted-meta">
	            <i class="fas fa-user-graduate"></i></i>
	            <span class="meta-value">
	                Grade {{ question.student_class }}
	            </span>
	        </span>
	    {% endif %}
	
	    {% if question.school %}
	        <span class="highlighted-meta">
	            <i class="fas fa-graduation-cap"></i>
	            <span class="meta-value">
	                {{ question.school }}
	                {% if question.curriculum_followed %}
	                    ({{ question.curriculum_followed }})
	                {% endif %}
	            </span>
	        </span>
	    {% endif %}
	
	    {% if question.area or question.state %}
	        <span class="highlighted-meta">
	            <i class="fas fa-map-marker-alt"></i>
	            <span class="meta-value">
	                {% if question.area %}
	                    {{ question.area.rstrip }} {% if question.state %}, {{ question.state }} {% endif %}
	                {% elif question.state %}
	                    {{ question.state }}
	                {% endif %}
	            </span>
	        </span>
	    {% endif %}
	    {% if question.question_asked_on %}
	        <span class="highlighted-meta">
	            <i class="fas fa-calendar"></i>
	            <span class="meta-value">
	                {{ question.question_asked_on }}
	            </span>
	        </span>
	    {% endif %}

	    {# TODO: "Previous" and "Next" buttons #}
	</div>
{% if messages %}
<div class="messages">
    <div class="alert alert-success alert-dismissible fade show task-success-message" role="alert">
        {% for message in messages %}
        <span{% if message.tags %} class="{{ message.tags }}"{% endif %}>
            <i class="far fa-check-circle"></i>
            {{ message }}
        </span>
        {% endfor %}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
</div>
{% endif %}
<form action="{% url 'dashboard:answer-question' question_id=question.id %}" class="rich-text-form input-area" method="POST">
    {% csrf_token %}

    <div id="editor" data-placeholder="Type your answer here..."></div>

    <hr />
    <div id="toolbar" class="row justify-content-end">
        <span class="ql-formats">
            <button class="ql-bold"></button>
            <button class="ql-italic"></button>
            <button class="ql-underline"></button>
        </span>
        <span class="ql-formats">
            <button class="ql-script" value="sub"></button>
            <button class="ql-script" value="super"></button>
        </span>
        <span class="ql-formats">
            <button class="ql-list" value="ordered"></button>
            <button class="ql-list" value="bullet"></button>
            <button class="ql-indent" value="-1"></button>
            <button class="ql-indent" value="+1"></button>
        </span>
        <span class="ql-formats">
            <button class="ql-blockquote"></button>
            <button class="ql-link"></button>
            <button class="ql-image"></button>
            <button class="ql-video"></button>
            <button class="ql-formula"></button>
        </span>
    </div>
    {# TODO: Make editor more like Gmail's (as copied in design) #}
    <hr />

    <div class="submit-toolbar row">
		<div class="col-sm">
		    <input type="hidden" name="question_id" value="{{ question.id }}">
		    <input type="hidden" name="rich-text-content" value="" />
		    <button type="submit" class="btn btn-primary">Submit For Review</button>
		    <button type="submit" class="btn btn-primary btn-primary-hollow" name="mode" value="draft" disabled>Save Draft</button>
		</div>
	</div>
</form>

{% endblock %}
